// *************************************
//
//   pages/index
//
//
// *************************************

// 基本設定
//
// 讓主界面可以自動填滿螢幕高度
body, html, .main_content
  @extend %h100p

textarea
  resize: none

button:focus
  outline: none

a:focus
  outline: none

//
// 自定 tooltip 背景色
.tooltip-inner
  background-color: $c-tooltipColor
.tooltip.top .tooltip-arrow
  border-top-color: $c-tooltipColor



// 第一層基本頁面
.landing
  @extend %h100p
  background-color: $c-landing-bg
  position: relative
  z-index: +index($elements, landing)
  // display: none

  .lp-content
    padding-top: 33vh
    text-align: center

  .lp-logo
    .logo
      +container(250px)

  .lp-slogan
    +container($w-pad)
    // +text-shadow(0 1px 2px darken($c-landing, 40%))
    h5
      font-size: $fz-l
    p
      margin: 1em 0 0 0
      color: lighten($c-landing, 25%)
  .login-button
    +sassy-button("flat", 8px, $fz-l, $btn-facebook-login-bg, $btn-facebook-login-bg, $btn-facebook-login-text, "inset")
    margin-top: 30px
    border: 5px solid rgba($c-landing-bg, 0.5)

///////////////////////////////

// 主介面區塊
.mainUI
  @extend %w100p
  position: absolute
  top: 0
  z-index: +index($elements, map)
  overflow: hidden

  // overlay
  .overlay, .overlay-lv2
    @extend %w100p
    @extend %h100p
    position: absolute
    top: 0
    z-index: +index($elements, overlay)
    display: none
  .overlay-lv2
    z-index: +index($elements, overlay-lv2)
    background-color: rgba(black, 0.6)

  .top-bar
    +clearfix
    border-radius: 0
    margin-bottom: 0
    // background-image: url("../img/brushed.jpg")
    background-color: $c-topbar-bg
    border: 0
    border-bottom: 3px solid $c-topbar-border-bottom
    +box-shadow(0 0 8px rgba(#000, 0.8))
    z-index: +index($elements, top-bar)

    .right, .center, .left
      +span(4)

    .left
      margin-top: 1em
      a
        color: #fff
      .fa-inverse
        color: $c-topbar-bg

    .center
      .top-logo
        width: 135px
        margin: 8px auto

    .right
      text-align: right
      margin-top: 1em
      a
        color: #fff
        margin: 0
        padding: 0 1em
        &:hover
          color: #eee
      #sign_out
        border-left: 1px solid #fff
        margin-top: 10px
      img
        width: 48px
        display: inline-block
        border: 5px solid #fff





  // map canvas
  .map
    // @extend %h100p
    @extend %w100p
    position: absolute
    z-index: +index($elements, map)

  // 地圖主界面
  .avatar
    position: absolute
    display: block
    top: 0
    margin-top: calc(50vh - 100px)
    left: calc(50% - 50px)
    @extend %circle
    width: 100px
    height: 100px
    padding: 6px
    background-color: rgba($c-event, 0.9)
    +transition(color, 1s)
    +box-shadow(0 10px 25px rgba(#000, 0.7))
    z-index: +index($elements, change_category)


// panel 類界面
.wish-detail, .event-detail, .list-view
  display: none


.list-view
  @extend %h100p
  @extend %info-card
  @extend %changeableBg
  position: relative
  overflow: scroll
  width: 350px
  background-color: #fff
  float: left
  z-index: +index($elements, list-view)
  padding: 0 0.5em
  padding-bottom: 160px

  .event-unit, .wish-unit
    +clearfix
    width: 100%
    background-color: $c-listview-unit-bg
    min-height: 120px
    border-bottom: 1px solid #ddd
    padding: 0.5em
    margin-bottom: 0.5em
    &:first-child
      margin-top: 0.5em
    &:last-child
      margin-bottom: 0.5em
    h5
      margin: 0
  @extend %changeableBorderTop

  .content
    padding: 0
    p
      margin: 0
    .kilo
      float: right
    .location
      text-align: left
      margin: 0.5em 0
    .time-range
      margin-top: 1em

  .buttons
    +span(12)
    .listview-btn
      +span(6)
    .follow, .join, .host
      width: 100%
    .follow
      +sassy-button("flat", 0, $fz-s, $btn-listview-follow, $btn-listview-follow, #fff, "inset")
    .join
      +sassy-button("flat", 0, $fz-s, $btn-listview-join, $btn-listview-follow, #fff, "inset")
    .host
      +sassy-button("flat", 0, $fz-s, $btn-listview-host, $btn-listview-follow, #fff, "inset")


  .listview-reload
    margin-top: 0.5em
    .reloadBtn
      width: 100%
      +sassy-button("flat", 0, $fz-s, $c-listview-reload-btn, $btn-primary, #fff, "inset")


.info-panel
  @extend %h100p
  @extend %info-card
  position: relative
  overflow: scroll
  width: 400px
  background-color: $c-infopanel-bg
  padding-bottom: 160px

  float: right
  // +box-shadow(0 0 15px #000)
  border: 5px solid #fff
  display: none
  z-index: index($elements, info-panel)
  h3
    @extend %panelTitle
    margin: 0

  .wish-owner, .event-owner
    background-color: $c-infopanel-owner-bg
    padding: 1em 0.5em 0.5em 0.5em
    border-bottom: 2px solid darken($c-infopanel-owner-bg, 20%)
    h4
      color: darken($c-yellow, 50%)
      font-size: $fz-m
      margin: 0
      padding: 1em 0
    .owner-avatar
      display: inline-block
      margin-left: 1em
      height: 50px
      width: 50px
      @extend %circle
      border: 5px solid #fff
    .owner-name
      color: darken($c-yellow, 50%)
      margin-left: 75px
      margin-top: -40px
      padding-bottom: 1em
    .follow
      +sassy-button("flat", 5px, $fz-s, darken($c-yellow, 20%), $btn-primary, #fff, "inset")
      margin-top: -4px
      float: right
    .unfollow
      +sassy-button("flat", 5px, $fz-s, darken($c-ctrl_board, 30%), $btn-primary, #fff, "inset")
      margin-top: -4px
      float: right

  // .wish-title, .event-title
  //   margin: 0.5em 0
  //   @extend %w100p
  //   padding: 1em
  //   .inner
  //     @extend %w100p
  //     @extend %h100p
  //     margin: 0
  //     background-color: #FFF
  //     +box-shadow(0 0 2px #aaa)
  //     padding: 1.4em
  //     font-weight: bold
  //   .signature
  //     margin: 0
  //     text-align: right
  //     font-size: $fz-xs
  //     color: darken(#fff, 40%)

  // .other-info
  //   @extend .wish-title
  //   padding-top: 0
  //   margin-bottom: 0
  //   .detail
  //     background-color: lighten($c-ctrl_board, 3%)
  //     margin-bottom: 0.5em
  //     padding: 0.5em 1em
  //     &:hover
  //       background-color: lighten($c-ctrl_board, 5%)
  //       +box-shadow(0 0 3px darken($c-ctrl_board, 15%))
  //   h4
  //     font-size: $fz-m
  //     color: darken($c-ctrl_board, 70%)
  //   p
  //     margin: 1em 0 0 37px
  //     padding-bottom: 0.5em
  //     color: darken($c-ctrl_board, 60%)
  //     font-size: $fz-s
  //     border-bottom: 1px solid darken($c-ctrl_board, 30%)

  .divider-up, .divider-down
    width: 100%
    height: 14px
  .divider-up
    background-image: url("../img/comment-divider-up.png")
    position: absolute
    top: 0
  .divider-down
    position: absolute
    background-image: url("../img/comment-divider-down.png")
    bottom: 0
  .comments
    font-size: $fz-s
    position: relative
    .timeline
      width: 100%
      padding-top: 1em
      max-height: 250px
      max-height: 26vh
      overflow-y: scroll
    .comments-unit
      +clearfix
      min-height: 50px
      padding: 0 1em
      padding-bottom: 2em
      background: url("../img/timeline.png") 20px 0 repeat-y
      &:last-child
        margin-bottom: 0
        background: none
        padding-bottom: 2em
    .left
      +span(3.5)
      .comment-avatar
        @extend %m0auto
        width: 60px
        height: 60px
        padding: 5px
        +border-radius(50%)
        background-color: #FFF
      .name
        +span(12)
        word-break: break-all
        padding: 0 1em
        margin-top: 1em
        font-size: $fz-xs
        text-align: center
        color: #fff
        background-color: darken($c-ctrl_board, 50%)
        +border-radius(5px)
        span
          display: block
    .right
      +span(8.5)
      .say
        width: 100%
        @extend %m0auto
        background-color: #FFF
        color: #555
        padding: 1em
        +border-radius(10px)
      .time
        display: block
        text-align: right
        margin-top: 1em
        color: #bbb

  .comment-form
    padding: 0.5em 1em
    textarea
      font-size: $fz-s
  .buttons
    padding: 0 1em
    +clearfix
    .submit-comment
      +span(12)
      margin-bottom: 1em
      button
        width: 100%
        +sassy-button("flat", 0, $fz-s, $cs-secondary-red, $btn-primary, #fff, "inset")
    .follow, .share, .join, .host, .unfollow
      +span(4)
      margin-bottom: 1em
      button
        width: 100%
        +sassy-button("flat", 0, $fz-s, $cs-secondary-red, $btn-primary, #fff, "inset")
    .join, .host
      button
        +sassy-button("flat", 0, $fz-s, $cs-primary-red, $btn-primary, #fff, "inset")
    .unfollow
      button
        +sassy-button("flat", 0, $fz-s, darken($c-ctrl_board, 30%), $btn-primary, #fff, "inset")

  .option-buttons
    font-weight: bold
    @extend .wish-title
    padding-top: 0
    .observe
      @extend %w100p
      padding: 0 0.3em
      button
        @extend %w100p
        +sassy-button("flat", 0, $fz-m, darken($c-yellow, 20%), $btn-primary, #fff, "inset")
        margin-bottom: 0.6em
    .share, .host, .comment, .join
      +span(4)
      padding: 0 0.3em
      button
        @extend %w100p
        +sassy-button("flat", 0, $fz-m, $cs-secondary-red, $btn-primary, #fff, "inset")
        margin-bottom: 1em

// welcome splash screen
.powish-basic
  @extend %w100p
  @extend %h100p
  position: absolute
  bottom: 0
  z-index: +index($elements, splash)
  background-color: $c-welcome-bg
  // display: none
  h3, p, .plus-sign
    text-align: center
    color: $c-welcome-slogan-text
  .btn-mode
    display: none

  .slogan
    // display: none
  .plus-sign
    font-family: $typo-thin100
    font-size: 10em
    line-height: 0.8
    cursor: pointer
.powish-form-mode
  .form-mode
    +container(450px)
    display: none
  .btn-wrapper
    +clearfix
  .form-mode-logo
    +container(200px)
    margin-bottom: 35px
  .powish-close-btn
    width: 80px
    height: 80px
    color: $cs-powish-red
    +border-radius(50%)
    border: 1px solid lighten($c-welcome-slogan-text, 20%)
    margin: 0 auto
    font-family: $typo-thin100
    text-align: center
    font-size: 6em
    line-height: 0.7
    cursor: pointer
  .form-submit
    padding: 1em 1.5em
  .category-btn
    +span(3)
    height: 90px
    .eat
      +sassy-button("flat", 50%, 19px, $c-eat)
    .social
      +sassy-button("flat", 50%, 19px, $c-social)
    .sport
      +sassy-button("flat", 50%, 19px, $c-sport)
    .art
      +sassy-button("flat", 50%, 19px, $c-art)
    .eat, .social, .sport, .art
      width: 80px
      height: 80px
      margin: 0 5px
      padding: 26px
    .selected
      border: 5px solid #fff
      padding: 22px 0 0 22px




  h4
    color: $c-welcome-form-h4
    font-size: $fz-m
    font-weight: bolder

.powish-btn-mode
  height: 70px
  background-color: $c-ctrl-board-bg
  border-top: 5px solid $c-ctrl-board-border-top
  +box-shadow(0 0 8px rgba(#000, 0.8))
  .btn-mode
    font-family: $typo-thin100
    color: $c-ctrl-board-border-top
    width: 100%
    height: 60px
    text-align: center
    font-size: 4em
    line-height: 0.8
    font-weight: bold
    cursor: pointer

// window 類界面
.windows
  @extend %w100p
  @extend %h100p
  position: absolute
  overflow: hidden
  top: 0

.make-wish
  @extend %make-wish
  @extend %changeableBg
  z-index: +index($elements, make-wish)
  .make-wish-switch
    +clearfix
    @extend %panelTitle
    padding: 0

  .prev-wish-category, .next-wish-category
    width: 45px
    height: 45px
    float: left
    padding-top: 0.6em

  h3
    margin: 0
    width: 310px
    float: left
    border-bottom: none
    background-color: transparent
  a
    color: #fff
    &:hover
      +text-shadow(0 1px 1px #555)
  .location
    +span(12)
    color: $c-subinfo
    font-size: $fz-s
    text-align: center
    margin-top: 8px


.confirm-dialog
  @extend %make-wish
  z-index: +index($elements, confirm-dialog)
  input
    +span(9)
  .form-change
    +span(2.5)
    +push(0.5)
    margin-top: 2px


.form-wraper
  +clearfix
  padding: 0 2em
  margin-bottom: 2em
.button-wraper
  padding: 1em 2em 2em 2em
  text-align: center
  font-weight: bold
.form-cancel
  +sassy-button("flat", 5px, $fz-m, darken($c-ctrl_board, 30%), $btn-primary, #fff, "inset")
.form-submit
  +sassy-button("flat", 5px, $fz-m, $cs-powish-red, $btn-primary, #fff, "inset")
.form-change
  +sassy-button("flat", 5px, $fz-s, darken($c-ctrl_board, 30%), $btn-primary, #fff, "inset")

.share-form
  @extend %make-wish
  z-index: +index($elements, share-form)
  .content
    margin: 0.5em 0
    @extend %w100p
    .date
      display: block
      font-size: $fz-s
      color: darken($c-ctrl_board, 50%)
      margin-bottom: 1em
    .inner
      @extend %w100p
      @extend %h100p
      +clearfix
      margin: 0
      color: darken($c-ctrl_board, 60%)
      background-color: #FFF
      +box-shadow(0 0 2px #aaa)
      padding: 1em
      font-weight: bold
    .category, .location, .distance
      display: block
      font-size: $fz-s
      color: darken($c-ctrl_board, 40%)
    .category
      +span(3)
    .location
      +span(9)
      text-align: right
    .distance
      +span(12)
      text-align: right
      margin-top: 0.5em
      color: darken($c-ctrl_board, 30%)
  .button-wraper
    padding: 0 2em 2em 2em
    .share-fb
      @extend %w100p
      margin-bottom: 0.5em
      +sassy-button("flat", 5px, $fz-s, $c-facebook, $btn-primary, #fff, "inset")
    .share-twitter
      @extend .share-fb
      +sassy-button("flat", 5px, $fz-s, $c-twitter, $btn-primary, #fff, "inset")
    .share-weibo
      @extend .share-fb
      +sassy-button("flat", 5px, $fz-s, $c-weibo, $btn-primary, #fff, "inset")
    .share-email
      @extend .share-fb
      +sassy-button("flat", 5px, $fz-s, $c-email, $btn-primary, #fff, "inset")
    .form-cancel
      margin-top: 1.5em
      font-size: $fz-s


.host-form
  @extend %make-wish
  z-index: +index($elements, host-form) !important
  margin-top: 0
  h3
    margin-bottom: 1em
  .original-wish
    margin: 1em
    padding: 1em
    background-color: lighten($c-ctrl_board, 3%)
    +box-shadow(0 0 2px #aaa)
    .owner-avatar
      float: left
      width: 38px
      height: 38px
      +border-radius(50%)
      background-color: #fff
      padding: 3px
    .owner-name
      float: left
      font-size: $fz-s
      margin: 0.8em 0 0 0.5em
      color: darken($c-yellow, 50%)
    .wish-title
      clear: left
      font-weight: bold
      margin-top: 0.5em
      padding: 0 3em
      color: lighten(#000, 30%)
  .form-wraper
    margin-bottom: 1em
  .button-wraper
    padding-top: 1em


.view-comments
  @extend %make-wish
  z-index: +index($elements, view-comments)
  margin-top: 0
  width: 480px
  height: 680px
  h3
    margin: 0
  .everyones-comments
    height: 475px /* height of .view-comments - (.view-comments h3) - .comment-form */
    overflow-y: scroll
    overflow-x: hidden
    .timeline
      border-left: 5px solid darken($c-ctrl_board, 30%)
      margin: 50px 0 50px 58px
      +clearfix
    .comment-unit
      width: 450px
      margin-bottom: 1em
      margin-left: -54px
      font-size: $fz-s
      &:last-child
        margin-bottom: 0
        background-color: $c-ctrl_board

      +clearfix
      .comment-time
        +span(3)
        text-align: center
        margin-left: -5px
        .commenter-avatar
          display: block
          @extend %m0auto
          height: 50px
          width: 50px
          background-color: #FFF
          padding: 5px
          margin-bottom: 0.5em
          +border-radius(50%)
        .time
          background-color: darken($c-ctrl_board, 50%)
          +border-radius(50px)
          padding: 0 1em
          font-size: $fz-xs
          color: #fff
      .comment-info
        +span(9)
        margin-left: -10px
        .commenter-name
          +span(12)
          margin-top: 16px
        .comment-content
          +span(12)
          padding: 1em
          margin-top: 11px
          p
            background-color: #FFF
            padding: 0.5em
            margin: 0
            +border-radius(10px)

  .comment-divider
    @extend %w100p
    height: 17px
    background: url(../img/comment-divider.png) 0 0 no-repeat
    margin-top: -17px
  .comment-form
    +border-bottom-radius(10px)
    background-color: $c-ctrl_board
    position: absolute
    bottom: 0
    @extend %w100p
    height: 10em
    .comment, .buttons
      padding: 1em
    .buttons
      padding-top: 0
      text-align: center


///////////////////////////////


// 控制版基本外觀
.ctrl_board
  @extend %w100p
  height: 160px
  margin-bottom: -80px
  background-color: $c-ctrl-board-bg
  border-top: 5px solid $c-ctrl-board-border-top
  +box-shadow(0 0 8px rgba(#000, 0.8))
  position: fixed
  bottom: 0
  z-index: index($elements, ctrl_board)


.is_user
  display: none

  height: 90px
  padding-top: 1em
  text-align: center
  font-size: $fz-xl
  color: #000
  cursor: pointer


    +text-shadow(0 -1px 0 #fff)
// 設定 is_user, not_user 全寬
// .not_user, .is_user
//   @extend %span12

//   // 左半部，logo 欄位
//   .ctrl-logo
//     +span(4)
//     padding-top: 27px


//   // 中央應用控制區
//   .ctrl-main
//     +span(4)
//     padding-top: 20px
//     .options
//       +container($w-mobile)
//       text-align: center
//       a
//         color: #fff
//         @extend .trans-05s
//         &:hover
//           color: #eee
//           // +text-shadow(0 0 2px darken($c-ctrl_board, 30%))
//       .fa-inverse
//         color: #888
//         @extend .trans-05s
//         &:hover
//           color: darken(#888, 20%)



//   // 右半部帳號控制區
//   .ctrl-right
//     +span(4)
//     padding-top: 25px
//     text-align: right
//     a
//       font-size: $fz-s
//       color: darken($c-ctrl_board, 30%)
//       +transition(color 0.5s)
//       &:hover
//         color: darken($c-ctrl_board, 50%)
//         text-decoration: none
//     .notifier
//       +animation-iteration-count(2)
//       +animation-duration(1s)
//     h6
//       display: inline
//       margin: 0 1em 0 0
//       font-size: $fz-m
//       +text-shadow(0 -1px 0 #fff)

///////////////////////////////
